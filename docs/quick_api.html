---
layout: default
title: Quick API
description: Quick start reference for InsideForest classifiers and regressors.
nav_order: 3
---

<h1>Quick API</h1>
<p>This reference summarizes the basic flows to train, evaluate, and persist InsideForest models. All classes follow an interface similar to <code>scikit-learn</code>.</p>

<h2>Classifier workflow</h2>
<pre><code class="language-python">from sklearn.datasets import load_iris
from InsideForest import InsideForestClassifier

X, y = load_iris(return_X_y=True)
clf = InsideForestClassifier(
    rf_params={"n_estimators": 400, "random_state": 21},
    auto_fast=True,
    get_detail=True,
)
clf.fit(X, y)
cluster_labels = clf.predict(X)
rules = clf.df_clusters_description_
</code></pre>
<p><strong>Tips:</strong></p>
<ul>
  <li>Set <code>get_detail=True</code> to persist the rule tables generated during <code>fit</code>.</li>
  <li>The <code>df_clusters_description_</code> attribute stores readable bounds and metrics per cluster.</li>
  <li>Use <code>auto_fast=True</code> to apply performance presets automatically and inspect <code>_fast_params_used_</code> for the applied overrides.</li>
  <li>Records that do not match any learned rule receive the label <code>-1</code>; review the warning emitted during <code>predict</code> to quantify them.</li>
</ul>

<h2>Regressor workflow</h2>
<pre><code class="language-python">from sklearn.datasets import load_diabetes
from InsideForest import InsideForestRegressor

X, y = load_diabetes(return_X_y=True)
regr = InsideForestRegressor(auto_feature_reduce=True, get_detail=True)
regr.fit(X, y)
predictions = regr.predict(X)
region_rules = regr.df_clusters_description_
</code></pre>
<p>Enable <code>auto_feature_reduce</code> to limit the number of variables that participate in clustering. When <code>get_detail=True</code>, descriptive DataFrames are exposed via <code>df_clusters_description_</code> and <code>df_datos_explain_</code>.</p>

<h2>Cluster selection strategies</h2>
<p>Control how clusters are consolidated by setting the <code>method</code> parameter or using the helpers in <code>InsideForest.cluster_selector</code>:</p>
<pre><code class="language-python">from InsideForest import cluster_selector

menu = cluster_selector.MenuClusterSelector(quota=0.2)
menu.fit(clf.df_reres_, y)
rebalanced = menu.predict(clf.df_reres_)
</code></pre>
<ul>
  <li><code>"select_clusters"</code> (default) applies direct rules.</li>
  <li><code>cluster_selector.balance_lists_n_clusters</code> and <code>cluster_selector.match_class_distribution</code> rebalance assignments.</li>
  <li><code>cluster_selector.max_prob_clusters</code> favors segments with higher probabilities.</li>
  <li><code>MenuClusterSelector</code> maximizes information when multiple candidates exist.</li>
</ul>

<h2>Model persistence</h2>
<pre><code class="language-python">clf.save("model.joblib")
loaded = InsideForestClassifier.load("model.joblib")
assert list(loaded.feature_names_out_) == list(clf.feature_names_out_)
</code></pre>
<p>Serialized models include the base forest, computed rules, and metadata so you can continue the analysis later.</p>

<h2>Next steps</h2>
<ul>
  <li>Go deeper in <a href="how_it_works.html">How It Works</a> to understand the full pipeline.</li>
  <li>Explore the <a href="api/index.html">API reference</a> to review every module.</li>
  <li>Visit <a href="performance_tips.html">Performance Tips</a> when working with large datasets.</li>
</ul>
