---
layout: default
title: API Rápida
description: Referencia rápida para utilizar InsideForest.
nav_order: 3
nav_exclude: true
lang: es
---

<h1>API Rápida</h1>
<p>Esta guía resume los patrones esenciales de uso de InsideForest para clasificación y regresión. Las clases mantienen la convención <code>fit</code>/<code>predict</code> de <code>scikit-learn</code>.</p>

<h2>Flujo para clasificación</h2>
<pre><code class="language-python">from sklearn.datasets import load_iris
from InsideForest import InsideForestClassifier

X, y = load_iris(return_X_y=True)
clf = InsideForestClassifier(
    rf_params={"n_estimators": 400, "random_state": 21},
    auto_fast=True,
    get_detail=True,
)
clf.fit(X, y)
labels = clf.predict(X)
resumen = clf.df_clusters_description_
</code></pre>
<p>Activa <code>get_detail=True</code> para conservar las tablas generadas durante el ajuste. Explora <code>clf.feature_importances_</code>, <code>clf.plot_importances()</code> y <code>clf.df_datos_explain_</code> para comunicar qué variables generan cada segmento. Los registros que no cumplen ninguna regla reciben la etiqueta <code>-1</code>; revisa la advertencia emitida por <code>predict</code> para cuantificarlos.</p>

<h2>Flujo para regresión</h2>
<pre><code class="language-python">from sklearn.datasets import load_diabetes
from InsideForest import InsideForestRegressor

X, y = load_diabetes(return_X_y=True)
regr = InsideForestRegressor(auto_feature_reduce=True, get_detail=True)
regr.fit(X, y)
pred = regr.predict(X)
reglas = regr.df_clusters_description_
</code></pre>
<p>El parámetro <code>auto_feature_reduce</code> elimina variables poco informativas antes de generar las regiones. Con <code>get_detail=True</code> obtienes <code>df_clusters_description_</code> y <code>df_datos_explain_</code> para análisis adicionales.</p>

<h2>Estrategias de selección de clústeres</h2>
<pre><code class="language-python">from InsideForest import cluster_selector

menu = cluster_selector.MenuClusterSelector(quota=0.2)
menu.fit(clf.df_reres_, y)
ajustado = menu.predict(clf.df_reres_)
</code></pre>
<ul>
  <li><code>"select_clusters"</code>: selección directa basada en reglas.</li>
  <li><code>cluster_selector.balance_lists_n_clusters</code>: reparte observaciones de forma uniforme.</li>
  <li><code>cluster_selector.max_prob_clusters</code>: prioriza segmentos con probabilidad alta.</li>
  <li><code>cluster_selector.match_class_distribution</code> y <code>MenuClusterSelector</code>: preservan proporciones entre clases.</li>
</ul>

<h2>Persistencia de modelos</h2>
<pre><code class="language-python">clf.save("modelo.joblib")
cargado = InsideForestClassifier.load("modelo.joblib")
assert cargado._fast_params_used_ == clf._fast_params_used_
</code></pre>
<p>La carga restaura tanto el bosque entrenado como las regiones calculadas, permitiendo continuar con predicciones y análisis.</p>

<h2>¿Qué sigue?</h2>
<ul>
  <li>Lee <a href="how_it_works_es.html">Cómo funciona</a> para profundizar en árboles, regiones y etiquetas.</li>
  <li>Visita la <a href="api/index_es.html">referencia completa</a> para conocer cada módulo disponible.</li>
  <li>Antes de ejecutar experimentos intensivos, revisa <a href="performance_tips_es.html">consejos de rendimiento</a>.</li>
</ul>
